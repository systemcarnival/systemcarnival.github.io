<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="../static/css/dropzone.css">
    <link rel="stylesheet" href="../static/css/basic.css">
    <link rel="stylesheet" href="../static/css/countrySelect.css">
    <link rel="stylesheet" href="../static/css/styles.css">
    <script src="../static/js/responsive-nav.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//geodata.solutions/includes/countrystatecity.js"></script>
</head>

<body>
    <div class="wrap-header">
        <header>
            <form id="demo-2">
                <input type="search" placeholder="Search">
                <a href="project.html" class="logotype">Charitable</a>
            </form>

            <nav class="nav-collapse">
                <ul>
                    <li class="menu-item"><a href="profile.html">Profile</a></li>
                    <li class="menu-item"><a href="requests.html">Projects</a></li>
                    <li class="menu-item pr0"><a href="signin.html">Log In</a></li>
                </ul>
            </nav>
        </header>
    </div>
    <div class="content_crtpr">
        <p class="maintxt">Create your project</p>

        <!-- Images Upload -->

        <form action="/upload-image" class="dropzone needsclick dz-clickable" id="demo-upload"
            enctype="multipart/form-data" method="POST">
            <div class="dz-default dz-message">
                <button class="dz-button" type="button" onchange="updateSize()">Drag & drop photos here</button>
                <input type="hidden" name="_csrf" value="${_csrf.token}" />
            </div>
        </form>
        <br />
        <form action="https://developer.mozilla.org/ru/docs/Web/API/WindowEventHandlers/onbeforeunload"
            class="create_pr_form1" method="post" id="filter_form">
            <div class="wr2">
                <div class="create_pr_wrap">
                    <div class="create_proj">
                        <div class="basicinf">
                            <p class="h-text ">Basic information:</p>
                            <div class="pr_name">
                                <div class="proj_name">
                                    <input type="text" name="name" id="name" placeholder="Project name">
                                </div>
                                <div class="details_wrap">
                                    <textarea class="validate[required,length[6,300]] details" id="details"
                                        placeholder="Description" rows="12"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="moreinf">
                            <p class="h-text ">Additional details:</p>
                            <div class="wrap_select">
                                <div class="categ_slct">
                                    <select name="slct" id="slct">
                                        <option selected disabled>Choose the category</option>
                                        <option value="1">Disaster</option>
                                        <option value="2">Education</option>
                                        <option value="3">Hunger</option>
                                        <option value="4">Environment</option>
                                        <option value="5">Health</option>
                                        <option value="6">Animals</option>
                                    </select>
                                </div>

                            </div>

                            <div class="region">
                                <p class="h3-text ">Choose your region:</p>
                                <select name="country" class="countries" id="countryId">
                                    <option value="">Select Country</option>
                                </select>
                                <select name="state" class="states" id="stateId">
                                    <option value="">Select State</option>
                                </select>
                                <select name="city" class="cities" id="cityId">
                                    <option value="">Select City</option>
                                </select>
                            </div>
                            <input type="hidden" id="country_code" />
                            <p class="h3-text ">Amount needed :</p>
                            <div class="create_sum">
                                <input type='currency' value="$" class="currency_input" placeholder="">
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="wrapview">
                <a href="">
                    <div class="button_proj">Create project</div>
                </a>
            </div>
            <div class="wrapview">
                <a href="">
                    <div class="cancel" id="cancel">Cancel</div>
                </a>
            </div>
            <input type="submit">
        </form>

        <footer>
            <div class="links">
                <div class="block1">
                    <div class="row hr"><a href="#">Legal</a></div>
                    <div class="row"><a href="#">Terms of Service</a></div>
                    <div class="row"><a href="#">Privacy Policy</a></div>
                    <div class="row"><a href="#">Cookie Information</a></div>
                    <div class="row"><a href="#">GDPR Commitment</a></div>
                </div>
                <div class="block2">
                    <div class="row hr"><a href="#">Company</a></div>
                    <div class="row"><a href="#">Blog</a></div>
                    <div class="row"><a href="#">Career</a></div>
                    <div class="row"><a href="#">Privacy</a></div>
                    <div class="row"><a href="#">About</a></div>
                </div>
            </div>
            <div class="block3">
                <p class="hr">System Carnival</p>
                Copyright Â© 2020 . Designed by Ivan Kagitin
                All rights reserved.
            </div>
        </footer>
    </div>

    <script src="../static/js/fastclick.js"></script>
    <script src="../static/js/scroll.js"></script>
    <script src="../static/js/fixed-responsive-nav.js"></script>
    <script src="../static/js/upload-image.js"></script>
    <script src="../static/js/currency.js"></script>
    <script src="../static/js/dropzone-amd-module.js"></script>
    <script src="../static/js/dropzone.js"></script>
    <script src="../static/js/dropzone.js.map"></script>
    <script src="../static/js/search-countries.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="../static/js/countrySelect.min.js"></script>
    <script>
        $("#country").countrySelect({
            defaultCountry: "us",
            preferredCountries: ['us', 'gb', 'ua'],
            responsiveDropdown: true
        });
    </script>



    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</body>
<script>



    var elements = document.querySelectorAll('#name, #details');

    function checkValidity() { };

    for (i = 0; i < elements.length; i++) {
        (function (element) {
            var id = element.getAttribute('id');
            element.value = sessionStorage.getItem(id); 
            element.oninput = function () {
                sessionStorage.setItem(id, element.value);
                checkValidity();
            };
        })(elements[i]);
    }
    document.getElementById("slct").onchange = function () {
        localStorage.setItem('slct', document.getElementById("slct").value);
    }

    if (localStorage.getItem('slct')) {
        document.getElementById("slct").options[localStorage.getItem('slct')].selected = true;
    }

    $(window).on("beforeunload", function () {

        return "Are you sure you want to leave the page?";

    });

    $(document).ready(function () {
        $(window).unload(function () {
            /*$('#cancelButton').trigger('click');*/
            console.log("Goodbye!");
        });
    });

    /*$(window).on('unload', function(){
    alert("lalalla");
    $('#cancelButton').trigger('click');
    
    });*/

    $(document).on("submit", "form", function (event) {

        $(window).off("beforeunload");
        document.getElementById('details').value = ''
        window.location.reload();


    });
</script>

</html>